- id: heizung_buero_tag
  alias: "Heizung Büro - Tagesmodus"
  description: "Büro auf eingestellte Tagestemperatur von 7:00 bis 22:00"
  trigger:
    - platform: time
      at: "07:00:00"
      id: time_trigger
    - platform: homeassistant
      event: start
      id: startup_trigger
    - platform: time_pattern
      minutes: "/5"
      id: retry_trigger
    - platform: state
      entity_id: input_number.heizung_buero_tag_temperatur
      id: temp_changed
  condition:
    - condition: time
      after: "07:00:00"
      before: "22:00:00"
  action:
    - service: climate.set_hvac_mode
      target:
        entity_id: climate.heizung_buro
      data:
        hvac_mode: auto
    - delay:
        milliseconds: 500
    - service: climate.set_temperature
      target:
        entity_id: climate.heizung_buro
      data:
        temperature: "{{ states('input_number.heizung_buero_tag_temperatur') | float }}"

- id: heizung_buero_nacht
  alias: "Heizung Büro - Nachtmodus"
  description: "Büro auf 16°C ab 22:00"
  trigger:
    - platform: time
      at: "22:00:00"
      id: time_trigger
    - platform: homeassistant
      event: start
      id: startup_trigger
    - platform: time_pattern
      minutes: "/5"
      id: retry_trigger
  condition:
    - condition: or
      conditions:
        - condition: time
          after: "22:00:00"
        - condition: time
          before: "07:00:00"
  action:
    - service: climate.set_hvac_mode
      target:
        entity_id: climate.heizung_buro
      data:
        hvac_mode: auto
    - delay:
        milliseconds: 500
    - service: climate.set_temperature
      target:
        entity_id: climate.heizung_buro
      data:
        temperature: 16

- id: heizung_bad_tag
  alias: "Heizung Bad - Tagesmodus"
  description: "Bad auf eingestellte Tagestemperatur von 7:00 bis 22:00"
  trigger:
    - platform: time
      at: "07:00:00"
      id: time_trigger
    - platform: homeassistant
      event: start
      id: startup_trigger
    - platform: time_pattern
      minutes: "/5"
      id: retry_trigger
    - platform: state
      entity_id: input_number.heizung_bad_tag_temperatur
      id: temp_changed
  condition:
    - condition: time
      after: "07:00:00"
      before: "22:00:00"
  action:
    - service: climate.set_hvac_mode
      target:
        entity_id: climate.heizung_bad
      data:
        hvac_mode: auto
    - delay:
        milliseconds: 500
    - service: climate.set_temperature
      target:
        entity_id: climate.heizung_bad
      data:
        temperature: "{{ states('input_number.heizung_bad_tag_temperatur') | float }}"

- id: heizung_bad_nacht
  alias: "Heizung Bad - Nachtmodus"
  description: "Bad auf 16°C ab 22:00"
  trigger:
    - platform: time
      at: "22:00:00"
      id: time_trigger
    - platform: homeassistant
      event: start
      id: startup_trigger
    - platform: time_pattern
      minutes: "/5"
      id: retry_trigger
  condition:
    - condition: or
      conditions:
        - condition: time
          after: "22:00:00"
        - condition: time
          before: "07:00:00"
  action:
    - service: climate.set_hvac_mode
      target:
        entity_id: climate.heizung_bad
      data:
        hvac_mode: auto
    - delay:
        milliseconds: 500
    - service: climate.set_temperature
      target:
        entity_id: climate.heizung_bad
      data:
        temperature: 16
