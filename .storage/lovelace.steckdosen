{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace.steckdosen",
  "data": {
    "config": {
      "views": [
        {
          "title": "Steckdosen",
          "path": "default_view",
          "icon": "mdi:power-plug",
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### \u26a1 Smart Steckdosen",
                  "card_mod": {
                    "style": "ha-card { background: transparent; box-shadow: none; padding: 8px 0 0 0; }"
                  }
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "entity": "switch.server_switch_1",
                      "icon": "mdi:server",
                      "name": "Server",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.server_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "none"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "switch.rechner_switch_1",
                      "icon": "mdi:desktop-tower",
                      "name": "Rechner",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.rechner_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "none"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "switch.nuki_switch_1",
                      "icon": "mdi:lock",
                      "name": "Nuki",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.nuki_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "entity": "switch.bambulab_a1_switch_1",
                      "icon": "mdi:printer-3d",
                      "name": "Bambulab A1",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.bambulab_a1_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "switch.lelit_switch_1",
                      "icon": "mdi:coffee-maker",
                      "name": "Lelit",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.lelit_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "switch.steckdose_fred",
                      "icon": "mdi:robot-vacuum",
                      "name": "Fred",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.steckdose_fred_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "switch.steckdose_helene",
                      "icon": "mdi:power-plug",
                      "name": "Helene",
                      "show_state": false,
                      "show_label": true,
                      "label": "[[[ return states[\"sensor.steckdose_helene_power\"].state + \" W\" ]]]",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "state": [
                        {
                          "value": "on",
                          "styles": {
                            "card": [
                              {
                                "background": "rgba(76, 175, 80, 0.2)"
                              },
                              {
                                "border": "1px solid rgba(76, 175, 80, 0.5)"
                              }
                            ],
                            "icon": [
                              {
                                "color": "#4CAF50"
                              }
                            ],
                            "label": [
                              {
                                "color": "#4CAF50"
                              }
                            ]
                          }
                        },
                        {
                          "value": "off",
                          "styles": {
                            "card": [
                              {
                                "opacity": "0.5"
                              }
                            ],
                            "icon": [
                              {
                                "color": "var(--secondary-text-color)"
                              }
                            ]
                          }
                        }
                      ],
                      "styles": {
                        "card": [
                          {
                            "border-radius": "12px"
                          },
                          {
                            "padding": "16px 12px"
                          }
                        ],
                        "grid": [
                          {
                            "grid-template-areas": "\"i\" \"n\" \"l\""
                          }
                        ],
                        "icon": [
                          {
                            "width": "32px"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "13px"
                          },
                          {
                            "font-weight": "500"
                          },
                          {
                            "margin-top": "8px"
                          }
                        ],
                        "label": [
                          {
                            "font-size": "18px"
                          },
                          {
                            "font-weight": "bold"
                          },
                          {
                            "margin-top": "4px"
                          }
                        ]
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### \ud83d\udcca Gesamtverbrauch",
                  "card_mod": {
                    "style": "ha-card { background: transparent; box-shadow: none; padding: 8px 0 0 0; }"
                  }
                },
                {
                  "type": "custom:button-card",
                  "entity": "sensor.server_power",
                  "show_entity_picture": false,
                  "show_icon": false,
                  "show_name": false,
                  "show_state": true,
                  "state_display": "[[[ return (parseFloat(states['sensor.server_power'].state || 0) + parseFloat(states['sensor.rechner_power'].state || 0) + parseFloat(states['sensor.nuki_power'].state || 0) + parseFloat(states['sensor.bambulab_a1_power'].state || 0) + parseFloat(states['sensor.lelit_power'].state || 0) + parseFloat(states['sensor.steckdose_fred_power'].state || 0) + parseFloat(states['sensor.steckdose_helene_power'].state || 0)).toFixed(1) + ' W aktuell' ]]]",
                  "styles": {
                    "card": [
                      {
                        "background": "rgba(255, 152, 0, 0.15)"
                      },
                      {
                        "border-radius": "12px"
                      },
                      {
                        "padding": "15px"
                      }
                    ],
                    "state": [
                      {
                        "font-size": "28px"
                      },
                      {
                        "font-weight": "bold"
                      },
                      {
                        "color": "#FF9800"
                      }
                    ]
                  }
                },
                {
                  "type": "markdown",
                  "content": "#### Gesamtenergie (seit Installation)",
                  "card_mod": {
                    "style": "ha-card { background: transparent; box-shadow: none; padding: 8px 0 0 0; }"
                  }
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.server_electricity",
                      "icon": "mdi:server",
                      "name": "Server",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.rechner_electricity",
                      "icon": "mdi:desktop-tower",
                      "name": "Rechner",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.nuki_electricity",
                      "icon": "mdi:lock",
                      "name": "Nuki",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.bambulab_a1_electricity",
                      "icon": "mdi:printer-3d",
                      "name": "Bambulab",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.lelit_electricity",
                      "icon": "mdi:coffee-maker",
                      "name": "Lelit",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.steckdose_fred_energie",
                      "icon": "mdi:robot-vacuum",
                      "name": "Fred",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "entity": "sensor.steckdose_helene_energie",
                      "icon": "mdi:power-plug",
                      "name": "Helene",
                      "show_state": true,
                      "show_name": true,
                      "layout": "icon_state_name2nd",
                      "state_display": "[[[ return parseFloat(entity.state).toFixed(2) + ' kWh' ]]]",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "styles": {
                        "card": [
                          {
                            "background": "transparent"
                          },
                          {
                            "box-shadow": "none"
                          }
                        ],
                        "icon": [
                          {
                            "width": "24px"
                          },
                          {
                            "color": "var(--primary-color)"
                          }
                        ],
                        "state": [
                          {
                            "font-size": "14px"
                          },
                          {
                            "font-weight": "bold"
                          }
                        ],
                        "name": [
                          {
                            "font-size": "10px"
                          },
                          {
                            "color": "var(--secondary-text-color)"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "type": "history-graph",
                  "title": "Leistung (24h)",
                  "hours_to_show": 24,
                  "entities": [
                    {
                      "entity": "sensor.server_power",
                      "name": "Server"
                    },
                    {
                      "entity": "sensor.rechner_power",
                      "name": "Rechner"
                    },
                    {
                      "entity": "sensor.lelit_power",
                      "name": "Lelit"
                    },
                    {
                      "entity": "sensor.bambulab_a1_power",
                      "name": "Bambulab"
                    },
                    {
                      "entity": "sensor.nuki_power",
                      "name": "Nuki"
                    },
                    {
                      "entity": "sensor.steckdose_fred_power",
                      "name": "Fred"
                    },
                    {
                      "entity": "sensor.steckdose_helene_power",
                      "name": "Helene"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  }
}